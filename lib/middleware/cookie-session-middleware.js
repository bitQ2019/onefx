"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true,
});
exports.cookieSessionMiddleware = cookieSessionMiddleware;

var _koaSession = _interopRequireDefault(require("koa-session"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

const CONFIG = {
  key: "koa:sess",
  maxAge: 14 * 86400000,
  // ms = 14 days
  overwrite: true,
  httpOnly: true,
  signed: true,
  rolling: false,
};

function cookieSessionMiddleware(server) {
  const config = {
    ...CONFIG,
    key: `${server.config.project}:sess`,
    ...server.config.session,
  };
  return (0, _koaSession.default)(config, server.app);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taWRkbGV3YXJlL2Nvb2tpZS1zZXNzaW9uLW1pZGRsZXdhcmUudHMiXSwibmFtZXMiOlsiQ09ORklHIiwia2V5IiwibWF4QWdlIiwib3ZlcndyaXRlIiwiaHR0cE9ubHkiLCJzaWduZWQiLCJyb2xsaW5nIiwiY29va2llU2Vzc2lvbk1pZGRsZXdhcmUiLCJzZXJ2ZXIiLCJjb25maWciLCJwcm9qZWN0Iiwic2Vzc2lvbiIsImFwcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOzs7O0FBR0EsTUFBTUEsTUFBTSxHQUFHO0FBQ2JDLEVBQUFBLEdBQUcsRUFBRSxVQURRO0FBRWJDLEVBQUFBLE1BQU0sRUFBRSxLQUFLLFFBRkE7QUFFVTtBQUN2QkMsRUFBQUEsU0FBUyxFQUFFLElBSEU7QUFJYkMsRUFBQUEsUUFBUSxFQUFFLElBSkc7QUFLYkMsRUFBQUEsTUFBTSxFQUFFLElBTEs7QUFNYkMsRUFBQUEsT0FBTyxFQUFFO0FBTkksQ0FBZjs7QUFTTyxTQUFTQyx1QkFBVCxDQUFpQ0MsTUFBakMsRUFBNkQ7QUFDbEUsUUFBTUMsTUFBTSxHQUFHLEVBQ2IsR0FBR1QsTUFEVTtBQUViQyxJQUFBQSxHQUFHLEVBQUcsR0FBRU8sTUFBTSxDQUFDQyxNQUFQLENBQWNDLE9BQVEsT0FGakI7QUFHYixPQUFHRixNQUFNLENBQUNDLE1BQVAsQ0FBY0U7QUFISixHQUFmO0FBS0EsU0FBTyx5QkFBUUYsTUFBUixFQUFnQkQsTUFBTSxDQUFDSSxHQUF2QixDQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNaWRkbGV3YXJlIH0gZnJvbSBcImtvYVwiO1xuaW1wb3J0IHNlc3Npb24gZnJvbSBcImtvYS1zZXNzaW9uXCI7XG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tIFwiLi4vc2VydmVyXCI7XG5cbmNvbnN0IENPTkZJRyA9IHtcbiAga2V5OiBcImtvYTpzZXNzXCIsXG4gIG1heEFnZTogMTQgKiA4NjQwMDAwMCwgLy8gbXMgPSAxNCBkYXlzXG4gIG92ZXJ3cml0ZTogdHJ1ZSxcbiAgaHR0cE9ubHk6IHRydWUsXG4gIHNpZ25lZDogdHJ1ZSxcbiAgcm9sbGluZzogZmFsc2Vcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjb29raWVTZXNzaW9uTWlkZGxld2FyZShzZXJ2ZXI6IFNlcnZlcik6IE1pZGRsZXdhcmUge1xuICBjb25zdCBjb25maWcgPSB7XG4gICAgLi4uQ09ORklHLFxuICAgIGtleTogYCR7c2VydmVyLmNvbmZpZy5wcm9qZWN0fTpzZXNzYCxcbiAgICAuLi5zZXJ2ZXIuY29uZmlnLnNlc3Npb25cbiAgfTtcbiAgcmV0dXJuIHNlc3Npb24oY29uZmlnLCBzZXJ2ZXIuYXBwKTtcbn1cbiJdfQ==
